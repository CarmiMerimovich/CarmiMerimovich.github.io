
<!DOCTYPE html>


<html lang="he" dir="rtl">
<head>
    <title>Carmi Merimovich, Personal Site</title>
    <link rel="icon" href="/me.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Carmi Merimovich, Personal Site">

<style>
        .staffHeader {
            display: flex;
            border: 1px solid black;
            background-image: linear-gradient(45deg, #93a5cf 0%, #e4efe9 100%);
        }
    
        .photoAndText {
            display: flex;
            flex-direction: row;
            align-items: center;
        }
        .staffPhoto {
            height: 6Em;
            margin-top: 5px;
            margin-inline-start: 5px;
            background: linear-gradient(to bottom, rgba(255,255,255,0.15) 0%,
                            rgba(0,0,0,0.15) 100%),
                             radial-gradient(at top center, rgba(255,255,255,0.40) 0%,
                              rgba(0,0,0,0.40) 120%) #989898;
            background-blend-mode: multiply,multiply;'
        }

        pre {
            direction: ltr;
        }
</style>

<script>
MathJax = {
    loader: {load: ['[tex]/unicode']},
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      packages: {'[+]': ['unicode']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body style="font-family: Verdana, Arial, Helvetica, sans-seif; background-color: gainsboro">
	<header>

		<div class="staffHeader">
			<div class="photoAndText">
				<div style="vertical-align: center; padding: 0px;">
					<img class="staffPhoto" 
							alt = "Carmi Merimovich"
							src="/me.png">
				</div>
				<div>
					<h2 style="padding: 0px 2px 0px 2px; margin: 0 0 0 0;">
						Carmi Merimovich
					</h2>
					<h3  style="padding: 0px 2px 0px 2px; margin: 0 0 0 0;">
						Personal Site
					</h3>
					<h3  style="padding: 0px 2px 0px 2px; margin: 0 0 0 0;">
                        <a href="/affiliation.html">Affiliation </a>
					</h3>
                    <h3>
					</h3>
                </div>
			</div>
		</div>
        <div>
            
                
	</header>






    
<h2>קימפול פקודת שפת סף אחת</h2>
<div>
יש לקמפל את הפקודה הבאה:
<div id="assemblyInstruction" style="direction: ltr; text-align: center;"></div>
יש לתת שתי צורות פתרון.
אחת כמספר הקסה ברוחב 32 ביטים.
השניה רצף בתים בהקסה משמאל לימין.
<hr />
</div>
<div><button id="answerButton" type="clock" onclick="makeAnswer();">תשובה</button></div>
<div><button id="firstStepButton" type="clock" onclick="firstStep();">צעד ראשון</button></div>
<div class="hidden" id="answer"> </div>
<div class="hidden" id="solution"></div>
<div><button id="nextStepButton" style="display: none" type="clock" onclick="nextStep();">עוד צעד</button></div>

<script src="../types.inc"></script>
<script>
  let info = rv64.B.randomInstruction();


  let e = document.getElementById("assemblyInstruction");
  e.innerHTML = info.str;

</script>

<script>
function makeAnswer() {
  const eFirtStepButton = document.getElementById("firstStepButton");
  eFirtStepButton.style.display = "none";

  const eAnswerButton = document.getElementById("answerButton");
  eAnswerButton.style.display = "none";

  step = 10000;
  makeStep();
}

function firstStep() {
  const eAnswerButton = document.getElementById("answerButton");
  eAnswerButton.style.display = "none";

  const eFirtStepButton = document.getElementById("firstStepButton");
  eFirtStepButton.style.display = "none";

  const eNextStepButton = document.getElementById("nextStepButton");
  eNextStepButton.style.display = "inline";
  step = 0;
  makeStep();
}

  function nextStep() {
    step++;
    makeStep();
  }

  function makeStep() {
 
    {
      let s = `תשובה<br/>
      קוד הפקודה בהקסה: ${info.machineCode.hex} <br/>`;
      let rev = info.machineCode.hex.match(/.{1,2}/g).reverse().join(" ");
      s += `הצגה בבתים מכתובת נמוכה לגבוהה (משמאל לימין) היא כלהלן:
        <div style="direction: ltr; text-align: center;">${rev}</div><hr/><hr/>`;
      let eAnswer = document.getElementById("answer");
      eAnswer .innerHTML = s;
    }
 
    let v = info.vars;

    let s = `
    דרך <br/>
  המנמוניק של הפקודה הוא ${info.vars.mnem}. `


    if (step > 0)
     s += `<hr/>מטבלת הפקודות נקבל שזוהי פקודה מסוג B
      והשדות המזהים שלה הם כלהלן:
     <div style="direction: ltr;">
      opcode = ${v.opCode.num} = 0b${v.opCode.bin}<br/> 
      fnc3 = ${v.fnc3.num} = 0b${v.fnc3.bin}<br/>
      </div>`;


    if (step > 1) {
      s += `<hr/>מהטקסט של הפקודה נקבל את שאר השדות:
     <div style="direction: ltr;">
      rs1 = ${v.rs1.num} = 0b${v.rs1.bin}<br/>
      rs2 = ${v.rs2.num} = 0b${v.rs2.bin}<br/>
      imm = ${v.imm.num} = 0b${v.imm.bin} <br/>
      </div>
     `;
    }

    if (step > 2) {
      s += `<hr/>בגלל הסמטוכה (שחוסכת חיווט!) בביטים נפרק את ההיסט לביטים באופן הבא:
        <div style="direction: ltr;">
          imm[1:4] = ${v.imm_1_4.num} = 0b${v.imm_1_4.bin} <br/>
          imm[5:10] = ${v.imm_5_10.num} = 0b${v.imm_5_10.bin} <br/>
          imm[11] = ${v.imm_11.num} <br/>
          imm[12] = ${v.imm_12.num} <br/>
         </div>`;
    }

    if (step > 3) {
      let t0 = "";
      for (let i = 0; i < info.fieldHeader.length; i++)
        t0 += `<th>${info.fieldHeader[i]}</th>`;

      let t1 = "";
      for (i = 0; i < info.varName.length; i++) {
        t1 += `<td>${v[info.varName[i]].num}</td>`;
      }
      s += `<hr/>נארגן את השדות בסדר הנכון.
        <div style="direction: ltr; text-align: center;">
        <table>
        <tr>
          ${t0}
        </tr>
        <tr>
          ${t1}
        </tr>
        </tr>
      </table>
        </div>`;
    }


    if (step > 4) {
      let t0 = "";
      for (let i = 0; i < info.fieldHeader.length; i++)
        t0 += `<th>${info.fieldHeader[i]}</th>`;

      let t1 = "";
      for (i = 0; i < info.varName.length; i++) {
        t1 += `<td>${v[info.varName[i]].bin}</td>`;
      }
      s += `<hr/>נכתוב בבינרי.
      <div style="direction: ltr; text-align: center;">
        <table>
        <tr>
          ${t0}
        </tr>
        <tr>
          ${t1}
        </tr>
        </tr>
      </table>
        </div>`;
    }

    if (step > 5) {
      let t1 = "";
      for (i = 0; i < info.varName.length; i++) {
        t1 += `${v[info.varName[i]].bin}`;
      }
      s += `<hr/>נצרף את כל השדות ונקבל:
      <div style="direction: ltr; text-align: center;">
        ${t1}
        </div>`;
    }

    if (step > 6) {
      let t1 = "";
      for (i = 0; i < info.varName.length; i++) 
        t1 += `${v[info.varName[i]].bin}`;
      
      s += `<hr/>נחלק לרביעיות ונקבל:
        <div style="direction: ltr; text-align: center;">
        ${t1.match(/.{1,4}/g).join(" ")}
        </div>`;
    }

    if (step > 7) {
        s += `<hr/>וסוף סוף נקבל את קוד הפקודה בהקסה: ${info.machineCode.hex} <br/>`;
    }

    if (step > 8) {
      let rev = info.machineCode.hex.match(/.{1,2}/g).reverse().join(" ");
        s += `<hr/>הצגה בבתים מכתובת נמוכה לגבוהה (משמאל לימין) היא כלהלן:
        <div style="direction: ltr; text-align: center;">${rev}</div>`;
    }

    if (step > 8) {
      let eNextStepButton = document.getElementById("nextStepButton");
      eNextStepButton.style.display = "none";
    }


    let eSolution = document.getElementById("solution");
    eSolution.innerHTML = s;
  }
</script>




 </div>

 <!DOCTYPE html>



<footer style="border-top: 1px solid #d5d5d5; font-size: .8em;">
    <ul style="font-family:'Helvetica', 'Arial', 'Sans-Serif';
            padding: 0px;
            list-style: none;
            font-weight: bold;">
            <li style="display: inline; margin-right: 20px;">
            <a style="color: #999;" 
                href="mailto:carmim@gmail.com">email</a>
        </li>
            <li style="display: inline; margin-right: 20px;">
            <a style="color: #999;" 
                href="https://www.linkedin.com/in/carmi-merimovich-21b59822a/"> linkedIn </a>
        </li>
            <li style="display: inline; margin-right: 20px;">
            <a style="color: #999;"
                href="/">Carmi Merimovich</a>
        </li>
        <li style="display: inline; margin-right: 20px;">
            <span style="color: #999;">
            Thins
            </span>
        </li>
    </ul>
</footer>


</body>
</html>













